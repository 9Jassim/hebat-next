{
  "version": 3,
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/lib/api.js"],"sourcesContent":["import axios from \"axios\"\r\n\r\nconst Client = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL || \"http://localhost:3000\",\r\n  withCredentials: true,\r\n})\r\n\r\nexport default Client\r\n"],"names":[],"mappings":";;;;;;;AAEA,MAAM,SAAS,sIAAM,MAAM,CAAC;IAC1B,SAAS,qKAAQ,GAAG,CAAC,mBAAmB,IAAI;IAC5C,iBAAiB;AACnB;uCAEe"}},
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/components/EditProductForm.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useRef, useState } from \"react\"\r\nimport Client from \"@/lib/api\"\r\n\r\nexport default function EditProductForm({ product, setProduct, handleCloseE }) {\r\n  const [categories, setCategories] = useState([])\r\n  const [newCategory, setNewCategory] = useState(false)\r\n  const categoryRef = useRef(null)\r\n\r\n  // Form refs\r\n  const modelRef = useRef(null)\r\n  const nameRef = useRef(null)\r\n  const descriptionRef = useRef(null)\r\n  const categorySelectRef = useRef(null)\r\n  const manualRef = useRef(null)\r\n  const imageRef = useRef(null)\r\n\r\n  // Fetch categories on mount\r\n  useEffect(() => {\r\n    const getCategories = async () => {\r\n      try {\r\n        const res = await Client.get(\"/products/category\", { withCredentials: true })\r\n        setCategories(res.data.categories || [])\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch categories:\", err)\r\n      }\r\n    }\r\n    getCategories()\r\n  }, [])\r\n\r\n  // Populate form fields when product or categories change\r\n  useEffect(() => {\r\n    if (!product || !modelRef.current) return\r\n\r\n    modelRef.current.value = product.model || \"\"\r\n    nameRef.current.value = product.name || \"\"\r\n    descriptionRef.current.value = product.description || \"\"\r\n    if (categorySelectRef.current && product.category?._id) {\r\n      categorySelectRef.current.value = product.category._id\r\n    }\r\n  }, [product, categories])\r\n\r\n  // Handle editing the product\r\n  const editProduct = async e => {\r\n    e.preventDefault()\r\n\r\n    const formData = new FormData()\r\n    formData.append(\"model\", modelRef.current.value)\r\n    formData.append(\"name\", nameRef.current.value)\r\n    formData.append(\"description\", descriptionRef.current.value)\r\n    formData.append(\"category\", categorySelectRef.current.value)\r\n\r\n    if (manualRef.current.files[0]) formData.append(\"manual\", manualRef.current.files[0])\r\n    if (imageRef.current.files[0]) formData.append(\"image\", imageRef.current.files[0])\r\n\r\n    try {\r\n      const res = await Client.put(`/products/${product._id}`, formData, {\r\n        headers: { \"Content-Type\": \"multipart/form-data\" },\r\n        withCredentials: true,\r\n      })\r\n      setProduct(res.data.product)\r\n      handleCloseE()\r\n    } catch (err) {\r\n      console.error(\"Error updating product:\", err)\r\n      alert(\"Failed to update product.\")\r\n    }\r\n  }\r\n\r\n  // Add new category\r\n  const addCategory = async () => {\r\n    try {\r\n      const res = await Client.post(\r\n        \"/products/category\",\r\n        { name: categoryRef.current.value },\r\n        { withCredentials: true }\r\n      )\r\n      setCategories(prev => [...prev, res.data.category])\r\n      categoryRef.current.value = \"\"\r\n      setNewCategory(false)\r\n    } catch (err) {\r\n      console.error(\"Error adding category:\", err)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form\r\n        onSubmit={editProduct}\r\n        className=\"flex flex-col my-2 gap-3 p-3 shadow-lg border border-gray-300 rounded-lg w-full max-w-sm mx-auto pt-5 bg-yellow-500\"\r\n      >\r\n        <h1 className=\"text-xl font-bold leading-tight tracking-tight text-gray-900 text-center mb-2\">\r\n          Edit Product\r\n        </h1>\r\n\r\n        {/* Model */}\r\n        <div>\r\n          <label htmlFor=\"model\" className=\"block mb-2 text-sm font-medium text-gray-900\">\r\n            Model\r\n          </label>\r\n          <input\r\n            ref={modelRef}\r\n            type=\"text\"\r\n            id=\"model\"\r\n            className=\"block w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 text-xs focus:ring-yellow-500 focus:border-yellow-500\"\r\n            placeholder=\"Product model\"\r\n          />\r\n        </div>\r\n\r\n        {/* Name */}\r\n        <div>\r\n          <label htmlFor=\"name\" className=\"block mb-2 text-sm font-medium text-gray-900\">\r\n            Name\r\n          </label>\r\n          <input\r\n            ref={nameRef}\r\n            type=\"text\"\r\n            id=\"name\"\r\n            className=\"block w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 text-xs focus:ring-yellow-500 focus:border-yellow-500\"\r\n            placeholder=\"Product name\"\r\n          />\r\n        </div>\r\n\r\n        {/* Description */}\r\n        <div>\r\n          <label htmlFor=\"description\" className=\"block mb-2 text-sm font-medium text-gray-900\">\r\n            Description\r\n          </label>\r\n          <textarea\r\n            ref={descriptionRef}\r\n            id=\"description\"\r\n            rows=\"4\"\r\n            className=\"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-yellow-500 focus:border-yellow-500\"\r\n            placeholder=\"Product description\"\r\n          ></textarea>\r\n        </div>\r\n\r\n        {/* Category */}\r\n        <div>\r\n          <label htmlFor=\"category\" className=\"block mb-2 text-sm font-medium text-gray-900\">\r\n            Category\r\n          </label>\r\n          <select\r\n            ref={categorySelectRef}\r\n            id=\"category\"\r\n            name=\"category\"\r\n            className=\"block w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 text-xs\"\r\n          >\r\n            <option value=\"\">--Category--</option>\r\n            {categories.map(cat => (\r\n              <option key={cat._id} value={cat._id}>\r\n                {cat.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          <span\r\n            className=\"mx-2 cursor-pointer text-sm underline text-gray-700\"\r\n            onClick={() => setNewCategory(!newCategory)}\r\n          >\r\n            New\r\n          </span>\r\n\r\n          {newCategory && (\r\n            <div className=\"flex mt-2\">\r\n              <input\r\n                type=\"text\"\r\n                id=\"category-name\"\r\n                className=\"block p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 text-xs flex-1\"\r\n                placeholder=\"New category name\"\r\n                ref={categoryRef}\r\n              />\r\n              <button\r\n                onClick={addCategory}\r\n                type=\"button\"\r\n                className=\"h-9 text-white bg-green-700 hover:bg-green-800 font-medium rounded-lg text-sm ml-1 px-3\"\r\n              >\r\n                +\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Manual */}\r\n        <div>\r\n          <label className=\"block mb-2 text-sm font-medium text-gray-900\">Manual</label>\r\n          <input\r\n            ref={manualRef}\r\n            type=\"file\"\r\n            id=\"manual\"\r\n            name=\"manual\"\r\n            className=\"p-1.5 block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50\"\r\n          />\r\n        </div>\r\n\r\n        {/* Image */}\r\n        <div>\r\n          <label className=\"block mb-2 text-sm font-medium text-gray-900\">Image</label>\r\n          <input\r\n            ref={imageRef}\r\n            type=\"file\"\r\n            id=\"image\"\r\n            name=\"image\"\r\n            className=\"p-1.5 block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50\"\r\n          />\r\n        </div>\r\n\r\n        {/* Submit */}\r\n        <button\r\n          type=\"submit\"\r\n          className=\"flex justify-center w-full text-white bg-black hover:bg-gray-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center items-center\"\r\n        >\r\n          <svg\r\n            className=\"m-1 w-5 h-5 text-white\"\r\n            aria-hidden=\"true\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"currentColor\"\r\n            viewBox=\"0 0 24 24\"\r\n          >\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              d=\"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm11-4.243a1 1 0 1 0-2 0V11H7.757a1 1 0 1 0 0 2H11v3.243a1 1 0 1 0 2 0V13h3.243a1 1 0 1 0 0-2H13V7.757Z\"\r\n              clipRule=\"evenodd\"\r\n            />\r\n          </svg>\r\n          Save Changes\r\n        </button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 403, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/lib/auth.js"],"sourcesContent":["import Client from \"@/lib/api\"\r\n\r\nexport const LogInUser = async data => {\r\n  try {\r\n    const res = await Client.post(\"/auth/signin\", data, { withCredentials: true })\r\n    return res.data.user || null\r\n  } catch (error) {\r\n    console.error(\"Login error:\", error?.response?.data || error.message)\r\n    return null\r\n  }\r\n}\r\n\r\nexport const CheckSession = async () => {\r\n  try {\r\n    const res = await Client.get(\"/auth/session\", { withCredentials: true })\r\n    return res.data || null\r\n  } catch (error) {\r\n    console.error(\"Session check error:\", error?.response?.data || error.message)\r\n    return null\r\n  }\r\n}\r\n\r\nexport const LogOutUser = async () => {\r\n  try {\r\n    await Client.post(\"/auth/signout\", {}, { withCredentials: true })\r\n    return true\r\n  } catch (error) {\r\n    console.error(\"Logout error:\", error?.response?.data || error.message)\r\n    return false\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAEO,MAAM,YAAY,OAAM;IAC7B,IAAI;QACF,MAAM,MAAM,MAAM,kHAAO,IAAI,CAAC,gBAAgB,MAAM;YAAE,iBAAiB;QAAK;QAC5E,OAAO,IAAI,IAAI,CAAC,IAAI,IAAI;IAC1B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gBAAgB,OAAO,UAAU,QAAQ,MAAM,OAAO;QACpE,OAAO;IACT;AACF;KARa;AAUN,MAAM,eAAe;IAC1B,IAAI;QACF,MAAM,MAAM,MAAM,kHAAO,GAAG,CAAC,iBAAiB;YAAE,iBAAiB;QAAK;QACtE,OAAO,IAAI,IAAI,IAAI;IACrB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB,OAAO,UAAU,QAAQ,MAAM,OAAO;QAC5E,OAAO;IACT;AACF;MARa;AAUN,MAAM,aAAa;IACxB,IAAI;QACF,MAAM,kHAAO,IAAI,CAAC,iBAAiB,CAAC,GAAG;YAAE,iBAAiB;QAAK;QAC/D,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iBAAiB,OAAO,UAAU,QAAQ,MAAM,OAAO;QACrE,OAAO;IACT;AACF;MARa"}},
    {"offset": {"line": 451, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 456, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/context/AuthContext.js"],"sourcesContent":["\"use client\"\r\nimport { createContext, useContext, useState, useEffect } from \"react\"\r\nimport { CheckSession, LogOutUser } from \"@/lib/auth\"\r\n\r\nconst AuthContext = createContext()\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  // 🔁 Automatically check session on load\r\n  useEffect(() => {\r\n    const fetchSession = async () => {\r\n      try {\r\n        const session = await CheckSession()\r\n        console.log(\"context :\", session)\r\n        if (session?.user) {\r\n          setUser(session.user)\r\n        } else {\r\n          setUser(null)\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Session check failed:\", err)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n    fetchSession()\r\n  }, [])\r\n\r\n  // 🚪 Logout handler\r\n  const logout = async () => {\r\n    try {\r\n      await LogOutUser() // backend clears cookie\r\n      setUser(null)\r\n    } catch (err) {\r\n      console.error(\"Logout failed:\", err)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, setUser, logout, loading }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext)\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;;AAIA,MAAM,4BAAc;AAEb,SAAS,aAAa,KAAY;QAAZ,EAAE,QAAQ,EAAE,GAAZ;;IAC3B,MAAM,CAAC,MAAM,QAAQ,GAAG,mKAAS;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,mKAAS;IAEvC,yCAAyC;IACzC,oKAAU;QACR,MAAM,eAAe;YACnB,IAAI;gBACF,MAAM,UAAU,MAAM;gBACtB,QAAQ,GAAG,CAAC,aAAa;gBACzB,IAAI,SAAS,MAAM;oBACjB,QAAQ,QAAQ,IAAI;gBACtB,OAAO;oBACL,QAAQ;gBACV;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,yBAAyB;YACzC,SAAU;gBACR,WAAW;YACb;QACF;QACA;IACF,GAAG,EAAE;IAEL,oBAAoB;IACpB,MAAM,SAAS;QACb,IAAI;YACF,MAAM,wHAAa,wBAAwB;;YAC3C,QAAQ;QACV,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,kBAAkB;QAClC;IACF;IAEA,qBACE,iLAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;YAAQ;QAAQ;kBAC3D;;;;;;AAGP;GAvCgB;KAAA;AAyCT,SAAS;;IACd,OAAO,qKAAW;AACpB;IAFgB"}},
    {"offset": {"line": 527, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 532, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/context/AuthContext.jsx"],"sourcesContent":["\"use client\"\r\nimport { createContext, useContext, useEffect, useState, useCallback } from \"react\"\r\nimport { CheckSession, LogOutUser } from \"@/lib/auth\"\r\n\r\nconst AuthContext = createContext({ user: null, setUser: () => {}, logout: async () => {} })\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null)\r\n\r\n  useEffect(() => {\r\n    const fetchSession = async () => {\r\n      const session = await CheckSession()\r\n      setUser(session?.user || null)\r\n    }\r\n    fetchSession()\r\n  }, [])\r\n\r\n  const logout = useCallback(async () => {\r\n    await LogOutUser()\r\n    setUser(null)\r\n    if (typeof window !== \"undefined\") window.location.reload()\r\n  }, [])\r\n\r\n  return <AuthContext.Provider value={{ user, setUser, logout }}>{children}</AuthContext.Provider>\r\n}\r\n\r\nexport const useAuth = () => useContext(AuthContext)\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;;AAIA,MAAM,4BAAc,wKAAc;IAAE,MAAM;IAAM,SAAS,KAAO;IAAG,QAAQ,WAAa;AAAE;AAEnF,SAAS,aAAa,KAAY;QAAZ,EAAE,QAAQ,EAAE,GAAZ;;IAC3B,MAAM,CAAC,MAAM,QAAQ,GAAG,mKAAS;IAEjC,oKAAU;QACR,MAAM,eAAe;YACnB,MAAM,UAAU,MAAM;YACtB,QAAQ,SAAS,QAAQ;QAC3B;QACA;IACF,GAAG,EAAE;IAEL,MAAM,SAAS,sKAAY;QACzB,MAAM;QACN,QAAQ;QACR,IAAI,OAAO,WAAW,aAAa,OAAO,QAAQ,CAAC,MAAM;IAC3D,GAAG,EAAE;IAEL,qBAAO,iLAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;QAAO;kBAAI;;;;;;AAClE;GAlBgB;KAAA;AAoBT,MAAM,UAAU;;IAAM,OAAA,qKAAW;AAAW;IAAtC"}},
    {"offset": {"line": 588, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 593, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/components/ProductDetails.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState, Fragment, useRef } from \"react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport Client from \"@/lib/api\"\r\nimport { useAuth } from \"@/context/AuthContext\"\r\nimport Dialog from \"@mui/material/Dialog\"\r\nimport DialogActions from \"@mui/material/DialogActions\"\r\nimport DialogTitle from \"@mui/material/DialogTitle\"\r\nimport DialogContent from \"@mui/material/DialogContent\"\r\nimport Button from \"@mui/material/Button\"\r\nimport EditProductForm from \"@/components/EditProductForm\"\r\nimport Link from \"next/link\"\r\n\r\n// ✅ Helper functions\r\nconst slugify = str =>\r\n  str\r\n    ?.toLowerCase()\r\n    .replace(/&/g, \"and\")\r\n    .replace(/[^a-z0-9\\s-]/g, \"\")\r\n    .trim()\r\n    .replace(/\\s+/g, \"-\") || \"\"\r\n\r\nconst deslugify = str =>\r\n  str\r\n    ?.replace(/-/g, \" \")\r\n    .replace(/\\band\\b/gi, \"&\")\r\n    .replace(/\\b\\w/g, c => c.toUpperCase()) || \"\"\r\n\r\nexport default function ProductDetails({ params }) {\r\n  const router = useRouter()\r\n  const { slug, category } = params\r\n  const { user } = useAuth()\r\n\r\n  const [product, setProduct] = useState(null)\r\n  const [clamped, setClamped] = useState(true)\r\n  const [openRemove, setOpenRemove] = useState(false)\r\n  const [openEdit, setOpenEdit] = useState(false)\r\n  const descRef = useRef(null)\r\n  const [isClamped, setIsClamped] = useState(false)\r\n\r\n  // ✅ Fetch product data\r\n  useEffect(() => {\r\n    const getProduct = async () => {\r\n      try {\r\n        const res = await Client.get(`/products/${slug}`, { withCredentials: true })\r\n        setProduct(res.data.product)\r\n      } catch (err) {\r\n        console.error(\"❌ Failed to fetch product:\", err)\r\n      }\r\n    }\r\n    getProduct()\r\n  }, [slug])\r\n\r\n  // ✅ Detect clamping\r\n  useEffect(() => {\r\n    const checkClamp = () => {\r\n      if (descRef.current) {\r\n        const el = descRef.current\r\n        setIsClamped(el.scrollHeight > el.clientHeight + 1)\r\n      }\r\n    }\r\n    checkClamp()\r\n    window.addEventListener(\"resize\", checkClamp)\r\n    return () => window.removeEventListener(\"resize\", checkClamp)\r\n  }, [product?.description])\r\n\r\n  const handleRemove = async () => {\r\n    try {\r\n      await Client.delete(`/products/${product._id}`, { withCredentials: true })\r\n      setOpenRemove(false)\r\n      router.push(`/products/${slugify(product.category?.name || category) || \"\"}`)\r\n    } catch (err) {\r\n      console.error(\"Error deleting product:\", err)\r\n    }\r\n  }\r\n\r\n  if (!product)\r\n    return (\r\n      <div className=\"flex justify-center items-center min-h-screen text-gray-700\">\r\n        Loading product...\r\n      </div>\r\n    )\r\n\r\n  // ✅ Build breadcrumb with proper slugified links\r\n  const categorySlug = slugify(product.category?.name || category)\r\n\r\n  const breadcrumbJsonLd = {\r\n    \"@context\": \"https://schema.org\",\r\n    \"@type\": \"BreadcrumbList\",\r\n    itemListElement: [\r\n      {\r\n        \"@type\": \"ListItem\",\r\n        position: 1,\r\n        name: \"Home\",\r\n        item: \"https://hebat.com/\",\r\n      },\r\n      {\r\n        \"@type\": \"ListItem\",\r\n        position: 2,\r\n        name: \"Products\",\r\n        item: \"https://hebat.com/products\",\r\n      },\r\n      {\r\n        \"@type\": \"ListItem\",\r\n        position: 3,\r\n        name: product.category?.name || deslugify(category),\r\n        item: `https://hebat.com/products/${categorySlug}`,\r\n      },\r\n      {\r\n        \"@type\": \"ListItem\",\r\n        position: 4,\r\n        name: product.name,\r\n        item: `https://hebat.com/products/${categorySlug}/${slug}`,\r\n      },\r\n    ],\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-[85rem] mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      {/* ✅ SEO JSON-LD */}\r\n      <script\r\n        type=\"application/ld+json\"\r\n        dangerouslySetInnerHTML={{ __html: JSON.stringify(breadcrumbJsonLd) }}\r\n      />\r\n\r\n      {/* ✅ Breadcrumb Navigation */}\r\n      <nav className=\"text-sm text-gray-600 mb-6 flex items-center flex-wrap gap-1\">\r\n        <Link href=\"/\" className=\"hover:text-yellow-600 font-medium\">\r\n          Home\r\n        </Link>\r\n        <span>/</span>\r\n        <Link href=\"/products\" className=\"hover:text-yellow-600 font-medium\">\r\n          Products\r\n        </Link>\r\n        <span>/</span>\r\n        <Link\r\n          href={`/products/${slugify(product.category?.name || category)}`}\r\n          className=\"hover:text-yellow-600 font-medium capitalize\"\r\n        >\r\n          {product.category?.name || deslugify(category)}\r\n        </Link>\r\n        <span>/</span>\r\n        <span className=\"text-gray-800 font-semibold\">{product.name}</span>\r\n      </nav>\r\n\r\n      {/* ✅ Admin Controls */}\r\n      {user && (\r\n        <div className=\"mb-6 flex flex-wrap gap-3\">\r\n          {/* Edit */}\r\n          <Fragment>\r\n            <button\r\n              onClick={() => setOpenEdit(true)}\r\n              type=\"button\"\r\n              className=\"text-white bg-green-700 hover:bg-green-600 font-medium rounded-lg text-sm px-5 py-2.5 inline-flex items-center\"\r\n            >\r\n              ✏️ Edit\r\n            </button>\r\n            <Dialog open={openEdit} onClose={() => setOpenEdit(false)}>\r\n              <DialogTitle>Edit Product Details</DialogTitle>\r\n              <DialogContent>\r\n                <EditProductForm\r\n                  product={product}\r\n                  setProduct={setProduct}\r\n                  handleCloseE={() => setOpenEdit(false)}\r\n                />\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button onClick={() => setOpenEdit(false)}>Close</Button>\r\n              </DialogActions>\r\n            </Dialog>\r\n          </Fragment>\r\n\r\n          {/* Remove */}\r\n          <Fragment>\r\n            <button\r\n              onClick={() => setOpenRemove(true)}\r\n              type=\"button\"\r\n              className=\"text-white bg-red-700 hover:bg-red-600 font-medium rounded-lg text-sm px-5 py-2.5 inline-flex items-center\"\r\n            >\r\n              🗑️ Remove\r\n            </button>\r\n            <Dialog open={openRemove} onClose={() => setOpenRemove(false)}>\r\n              <DialogTitle>Remove Product From Inventory?</DialogTitle>\r\n              <DialogActions>\r\n                <Button onClick={() => setOpenRemove(false)}>Cancel</Button>\r\n                <Button onClick={handleRemove} color=\"error\">\r\n                  Remove\r\n                </Button>\r\n              </DialogActions>\r\n            </Dialog>\r\n          </Fragment>\r\n        </div>\r\n      )}\r\n\r\n      {/* ✅ Product Content */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-10 items-start\">\r\n        {/* Image */}\r\n        <div className=\"order-1 lg:order-2\">\r\n          <img\r\n            src={product.image?.s3Url || \"/hebat_product_fill.png\"}\r\n            alt={product.name}\r\n            className=\"w-full rounded-lg shadow-md\"\r\n          />\r\n        </div>\r\n\r\n        {/* Details */}\r\n        <div className=\"order-2 lg:order-1\">\r\n          <h1 className=\"block text-2xl font-bold text-yellow-500 mb-3\">{product.name}</h1>\r\n          <p className=\"text-gray-700 text-sm mb-2\">\r\n            <strong>Barcode:</strong> {product.barcode || \"N/A\"}\r\n          </p>\r\n          <p className=\"text-gray-700 text-sm mb-4\">\r\n            <strong>Model:</strong> {product.model || \"N/A\"}\r\n          </p>\r\n\r\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Description</h2>\r\n          <p\r\n            ref={descRef}\r\n            className={`text-gray-800 mb-4 transition-all duration-300 ${\r\n              clamped ? \"line-clamp-3\" : \"\"\r\n            }`}\r\n          >\r\n            {product.description}\r\n          </p>\r\n\r\n          {isClamped && (\r\n            <button\r\n              onClick={() => setClamped(!clamped)}\r\n              className=\"text-yellow-600 hover:underline text-sm font-medium\"\r\n            >\r\n              {clamped ? \"Read more\" : \"Read less\"}\r\n            </button>\r\n          )}\r\n\r\n          <h2 className=\"text-xl font-semibold text-gray-900 mt-6 mb-2\">Manual</h2>\r\n          {product.manual ? (\r\n            <a\r\n              href={product.manual.s3Url}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              className=\"inline-flex items-center px-3 py-2 bg-gray-200 rounded hover:bg-gray-300\"\r\n            >\r\n              📄 View Manual\r\n            </a>\r\n          ) : (\r\n            <p className=\"text-gray-600 text-sm\">No manual available</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1076, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}