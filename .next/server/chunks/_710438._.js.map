{
  "version": 3,
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/lib/api.js"],"sourcesContent":["import axios from \"axios\"\r\n\r\nconst Client = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL || \"http://localhost:3000\",\r\n  withCredentials: true,\r\n})\r\n\r\nexport default Client\r\n"],"names":[],"mappings":";;;;;;AAEA,MAAM,SAAS,mIAAM,MAAM,CAAC;IAC1B,SAAS,QAAQ,GAAG,CAAC,mBAAmB,IAAI;IAC5C,iBAAiB;AACnB;uCAEe"}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/components/CategoryBar.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport Link from \"next/link\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { useSearchParams } from \"next/navigation\"\r\nimport Client from \"@/lib/api\"\r\n\r\nexport default function CategoryBar({ refreshTrigger }) {\r\n  const searchParams = useSearchParams()\r\n  const activeCategory = decodeURIComponent(searchParams.get(\"category\") || \"\")\r\n  const [categories, setCategories] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    let active = true\r\n    const fetchCategories = async () => {\r\n      try {\r\n        const res = await Client.get(\"/products/category\", { withCredentials: true })\r\n        if (active) setCategories(res.data.categories || [])\r\n      } catch (err) {\r\n        console.error(\"❌ Categories fetch error:\", err)\r\n      } finally {\r\n        if (active) setLoading(false)\r\n      }\r\n    }\r\n    fetchCategories()\r\n    const t = setTimeout(fetchCategories, 1500)\r\n    return () => {\r\n      active = false\r\n      clearTimeout(t)\r\n    }\r\n  }, [refreshTrigger])\r\n\r\n  return (\r\n    <div className=\"fixed top-[72px] left-0 right-0 z-40 bg-black border-t border-gray-800 shadow-sm overflow-x-auto no-scrollbar\">\r\n      <div className=\"max-w-screen-xl mx-auto px-2 flex items-center space-x-3 md:space-x-4 py-2\">\r\n        {loading ? (\r\n          <p className=\"text-gray-400 text-sm py-3\">Loading categories...</p>\r\n        ) : categories.length ? (\r\n          categories.map(c => {\r\n            const isActive = activeCategory === c.name\r\n            return (\r\n              <Link\r\n                key={c._id}\r\n                href={`/products?category=${encodeURIComponent(c.name)}`}\r\n                className={`whitespace-nowrap px-3 py-2 rounded-md transition-colors duration-200 text-sm sm:text-base ${\r\n                  isActive\r\n                    ? \"text-yellow-500 font-semibold underline underline-offset-4\"\r\n                    : \"text-white hover:text-yellow-500\"\r\n                }`}\r\n              >\r\n                {c.name}\r\n              </Link>\r\n            )\r\n          })\r\n        ) : (\r\n          <p className=\"text-gray-400 text-sm py-3\">No categories available</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;;;;;;AAOe,SAAS,YAAY,EAAE,cAAc,EAAE;IACpD,MAAM,eAAe;IACrB,MAAM,iBAAiB,mBAAmB,aAAa,GAAG,CAAC,eAAe;IAC1E,MAAM,CAAC,YAAY,cAAc,GAAG,qNAAS,EAAE;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,qNAAS;IAEvC,sNAAU;QACR,IAAI,SAAS;QACb,MAAM,kBAAkB;YACtB,IAAI;gBACF,MAAM,MAAM,MAAM,+GAAO,GAAG,CAAC,sBAAsB;oBAAE,iBAAiB;gBAAK;gBAC3E,IAAI,QAAQ,cAAc,IAAI,IAAI,CAAC,UAAU,IAAI,EAAE;YACrD,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,6BAA6B;YAC7C,SAAU;gBACR,IAAI,QAAQ,WAAW;YACzB;QACF;QACA;QACA,MAAM,IAAI,WAAW,iBAAiB;QACtC,OAAO;YACL,SAAS;YACT,aAAa;QACf;IACF,GAAG;QAAC;KAAe;IAEnB,qBACE,4OAAC;QAAI,WAAU;kBACb,cAAA,4OAAC;YAAI,WAAU;sBACZ,wBACC,4OAAC;gBAAE,WAAU;0BAA6B;;;;;uBACxC,WAAW,MAAM,GACnB,WAAW,GAAG,CAAC,CAAA;gBACb,MAAM,WAAW,mBAAmB,EAAE,IAAI;gBAC1C,qBACE;oBAEE,MAAM,CAAC,mBAAmB,EAAE,mBAAmB,EAAE,IAAI,EAAE,CAAC;oBACxD,WAAW,CAAC,2FAA2F,EACrG,WACI,+DACA,mCACL,CAAC;8BAED,EAAE,IAAI;mBARF,EAAE,GAAG;;;;;YAWhB,mBAEA,4OAAC;gBAAE,WAAU;0BAA6B;;;;;;;;;;;;;;;;AAKpD"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/components/EditCategoryForm.jsx"],"sourcesContent":["\"use client\"\r\nimport { useState } from \"react\"\r\nexport default function EditForm({ category = {}, onSave, onCancel }) {\r\n  const [form, setForm] = useState({\r\n    name: category?.name || \"\",\r\n    description: category?.description || \"\",\r\n  })\r\n  const [saving, setSaving] = useState(false)\r\n  const handleChange = e => {\r\n    setForm({ ...form, [e.target.name]: e.target.value })\r\n  }\r\n  const handleSubmit = async e => {\r\n    e.preventDefault()\r\n    setSaving(true)\r\n    try {\r\n      await onSave({ ...category, ...form })\r\n    } catch (err) {\r\n      console.error(err)\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">Name</label>\r\n        <input\r\n          name=\"name\"\r\n          value={form.name}\r\n          onChange={handleChange}\r\n          className=\"w-full border rounded p-2 bg-gray-50 text-black\"\r\n        />\r\n      </div>\r\n      <div className=\"flex justify-end space-x-2\">\r\n        <button type=\"button\" onClick={onCancel} className=\"px-4 py-2 bg-gray-200 rounded\">\r\n          Cancel\r\n        </button>\r\n        <button\r\n          type=\"submit\"\r\n          disabled={saving}\r\n          className=\"px-4 py-2 bg-brand-yellow text-black rounded\"\r\n        >\r\n          {saving ? \"Saving...\" : \"Save\"}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;;AAEe,SAAS,SAAS,EAAE,WAAW,CAAC,CAAC,EAAE,MAAM,EAAE,QAAQ,EAAE;IAClE,MAAM,CAAC,MAAM,QAAQ,GAAG,qNAAS;QAC/B,MAAM,UAAU,QAAQ;QACxB,aAAa,UAAU,eAAe;IACxC;IACA,MAAM,CAAC,QAAQ,UAAU,GAAG,qNAAS;IACrC,MAAM,eAAe,CAAA;QACnB,QAAQ;YAAE,GAAG,IAAI;YAAE,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,CAAC,KAAK;QAAC;IACrD;IACA,MAAM,eAAe,OAAM;QACzB,EAAE,cAAc;QAChB,UAAU;QACV,IAAI;YACF,MAAM,OAAO;gBAAE,GAAG,QAAQ;gBAAE,GAAG,IAAI;YAAC;QACtC,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;QAChB,SAAU;YACR,UAAU;QACZ;IACF;IACA,qBACE,4OAAC;QAAK,UAAU;QAAc,WAAU;;0BACtC,4OAAC;;kCACC,4OAAC;wBAAM,WAAU;kCAA4B;;;;;;kCAC7C,4OAAC;wBACC,MAAK;wBACL,OAAO,KAAK,IAAI;wBAChB,UAAU;wBACV,WAAU;;;;;;;;;;;;0BAGd,4OAAC;gBAAI,WAAU;;kCACb,4OAAC;wBAAO,MAAK;wBAAS,SAAS;wBAAU,WAAU;kCAAgC;;;;;;kCAGnF,4OAAC;wBACC,MAAK;wBACL,UAAU;wBACV,WAAU;kCAET,SAAS,cAAc;;;;;;;;;;;;;;;;;;AAKlC"}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/components/EditCategories.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport Client from \"@/lib/api\"\r\nimport EditForm from \"./EditCategoryForm\" // optional - skip if not yet built\r\n\r\nexport default function EditCategories({ onClose, onUpdated }) {\r\n  const [categories, setCategories] = useState([])\r\n  const [editingCategory, setEditingCategory] = useState(null)\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  // Fetch categories\r\n  useEffect(() => {\r\n    const loadCategories = async () => {\r\n      try {\r\n        setLoading(true)\r\n        const res = await Client.get(\"/products/category\", { withCredentials: true })\r\n        setCategories(res.data.categories || [])\r\n      } catch (error) {\r\n        console.error(\"Failed to load categories:\", error)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    loadCategories()\r\n  }, [])\r\n\r\n  // CRUD handlers\r\n  const handleEdit = category => {\r\n    setEditingCategory(category)\r\n  }\r\n\r\n  const handleCreate = () => {\r\n    setEditingCategory({ name: \"\", description: \"\" })\r\n  }\r\n\r\n  const handleSave = async data => {\r\n    try {\r\n      if (data._id) {\r\n        await Client.put(`/products/category/${data._id}`, data, { withCredentials: true })\r\n      } else {\r\n        await Client.post(`/products/category`, data, { withCredentials: true })\r\n      }\r\n\r\n      // Reload categories\r\n      const res = await Client.get(\"/products/category\", { withCredentials: true })\r\n      setCategories(res.data.categories || [])\r\n      setEditingCategory(null)\r\n      if (onUpdated) onUpdated()\r\n    } catch (error) {\r\n      console.error(\"Failed to save category:\", error)\r\n    }\r\n  }\r\n\r\n  const handleDelete = async id => {\r\n    if (!confirm(\"Delete this category?\")) return\r\n    try {\r\n      await Client.delete(`/products/category/${id}`, { withCredentials: true })\r\n      setCategories(prev => prev.filter(c => c._id !== id))\r\n      if (onUpdated) onUpdated()\r\n    } catch (error) {\r\n      console.error(\"Failed to delete category:\", error)\r\n    }\r\n  }\r\n\r\n  // Loading state\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center py-10\">\r\n        <p className=\"text-gray-600\">Loading categories...</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-2\">\r\n      {/* Header */}\r\n      <div className=\"flex justify-between items-center mb-3 border-b pb-2\">\r\n        <h4 className=\"text-lg font-semibold text-gray-800\">Categories</h4>\r\n        <div className=\"space-x-2\">\r\n          <button\r\n            className=\"px-3 py-1 bg-yellow-500 text-black rounded hover:bg-yellow-400 font-medium\"\r\n            onClick={handleCreate}\r\n          >\r\n            + New\r\n          </button>\r\n          {onClose && (\r\n            <button\r\n              className=\"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 text-gray-800 font-medium\"\r\n              onClick={onClose}\r\n            >\r\n              Close\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      {editingCategory ? (\r\n        <EditForm\r\n          category={editingCategory}\r\n          onSave={handleSave}\r\n          onCancel={() => setEditingCategory(null)}\r\n        />\r\n      ) : categories.length > 0 ? (\r\n        <ul className=\"divide-y divide-gray-200\">\r\n          {categories.map(cat => (\r\n            <li\r\n              key={cat._id}\r\n              className=\"flex justify-between items-center py-3 px-2 hover:bg-gray-50 rounded transition\"\r\n            >\r\n              <div>\r\n                <div className=\"font-medium text-gray-900\">{cat.name}</div>\r\n                {cat.description && <div className=\"text-sm text-gray-600\">{cat.description}</div>}\r\n              </div>\r\n              <div className=\"space-x-3\">\r\n                <button\r\n                  className=\"text-yellow-600 hover:text-yellow-700 font-medium\"\r\n                  onClick={() => handleEdit(cat)}\r\n                >\r\n                  Edit\r\n                </button>\r\n                <button\r\n                  className=\"text-red-500 hover:text-red-600 font-medium\"\r\n                  onClick={() => handleDelete(cat._id)}\r\n                >\r\n                  Delete\r\n                </button>\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      ) : (\r\n        <p className=\"text-gray-600 text-sm italic\">No categories found.</p>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;;;;AAMe,SAAS,eAAe,EAAE,OAAO,EAAE,SAAS,EAAE;IAC3D,MAAM,CAAC,YAAY,cAAc,GAAG,qNAAS,EAAE;IAC/C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,qNAAS;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,qNAAS;IAEvC,mBAAmB;IACnB,sNAAU;QACR,MAAM,iBAAiB;YACrB,IAAI;gBACF,WAAW;gBACX,MAAM,MAAM,MAAM,+GAAO,GAAG,CAAC,sBAAsB;oBAAE,iBAAiB;gBAAK;gBAC3E,cAAc,IAAI,IAAI,CAAC,UAAU,IAAI,EAAE;YACzC,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,8BAA8B;YAC9C,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG,EAAE;IAEL,gBAAgB;IAChB,MAAM,aAAa,CAAA;QACjB,mBAAmB;IACrB;IAEA,MAAM,eAAe;QACnB,mBAAmB;YAAE,MAAM;YAAI,aAAa;QAAG;IACjD;IAEA,MAAM,aAAa,OAAM;QACvB,IAAI;YACF,IAAI,KAAK,GAAG,EAAE;gBACZ,MAAM,+GAAO,GAAG,CAAC,CAAC,mBAAmB,EAAE,KAAK,GAAG,CAAC,CAAC,EAAE,MAAM;oBAAE,iBAAiB;gBAAK;YACnF,OAAO;gBACL,MAAM,+GAAO,IAAI,CAAC,CAAC,kBAAkB,CAAC,EAAE,MAAM;oBAAE,iBAAiB;gBAAK;YACxE;YAEA,oBAAoB;YACpB,MAAM,MAAM,MAAM,+GAAO,GAAG,CAAC,sBAAsB;gBAAE,iBAAiB;YAAK;YAC3E,cAAc,IAAI,IAAI,CAAC,UAAU,IAAI,EAAE;YACvC,mBAAmB;YACnB,IAAI,WAAW;QACjB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;QAC5C;IACF;IAEA,MAAM,eAAe,OAAM;QACzB,IAAI,CAAC,QAAQ,0BAA0B;QACvC,IAAI;YACF,MAAM,+GAAO,MAAM,CAAC,CAAC,mBAAmB,EAAE,GAAG,CAAC,EAAE;gBAAE,iBAAiB;YAAK;YACxE,cAAc,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,GAAG,KAAK;YACjD,IAAI,WAAW;QACjB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,8BAA8B;QAC9C;IACF;IAEA,gBAAgB;IAChB,IAAI,SAAS;QACX,qBACE,4OAAC;YAAI,WAAU;sBACb,cAAA,4OAAC;gBAAE,WAAU;0BAAgB;;;;;;;;;;;IAGnC;IAEA,qBACE,4OAAC;QAAI,WAAU;;0BAEb,4OAAC;gBAAI,WAAU;;kCACb,4OAAC;wBAAG,WAAU;kCAAsC;;;;;;kCACpD,4OAAC;wBAAI,WAAU;;0CACb,4OAAC;gCACC,WAAU;gCACV,SAAS;0CACV;;;;;;4BAGA,yBACC,4OAAC;gCACC,WAAU;gCACV,SAAS;0CACV;;;;;;;;;;;;;;;;;;YAQN,gCACC;gBACE,UAAU;gBACV,QAAQ;gBACR,UAAU,IAAM,mBAAmB;;;;;uBAEnC,WAAW,MAAM,GAAG,kBACtB,4OAAC;gBAAG,WAAU;0BACX,WAAW,GAAG,CAAC,CAAA,oBACd,4OAAC;wBAEC,WAAU;;0CAEV,4OAAC;;kDACC,4OAAC;wCAAI,WAAU;kDAA6B,IAAI,IAAI;;;;;;oCACnD,IAAI,WAAW,kBAAI,4OAAC;wCAAI,WAAU;kDAAyB,IAAI,WAAW;;;;;;;;;;;;0CAE7E,4OAAC;gCAAI,WAAU;;kDACb,4OAAC;wCACC,WAAU;wCACV,SAAS,IAAM,WAAW;kDAC3B;;;;;;kDAGD,4OAAC;wCACC,WAAU;wCACV,SAAS,IAAM,aAAa,IAAI,GAAG;kDACpC;;;;;;;;;;;;;uBAjBE,IAAI,GAAG;;;;;;;;;qCAyBlB,4OAAC;gBAAE,WAAU;0BAA+B;;;;;;;;;;;;AAIpD"}},
    {"offset": {"line": 448, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 453, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/lib/auth.js"],"sourcesContent":["import Client from \"@/lib/api\"\r\n\r\nexport const LogInUser = async data => {\r\n  try {\r\n    const res = await Client.post(\"/auth/signin\", data, { withCredentials: true })\r\n    return res.data.user || null\r\n  } catch (error) {\r\n    console.error(\"Login error:\", error?.response?.data || error.message)\r\n    return null\r\n  }\r\n}\r\n\r\nexport const CheckSession = async () => {\r\n  try {\r\n    const res = await Client.get(\"/auth/session\", { withCredentials: true })\r\n    return res.data || null\r\n  } catch (error) {\r\n    console.error(\"Session check error:\", error?.response?.data || error.message)\r\n    return null\r\n  }\r\n}\r\n\r\nexport const LogOutUser = async () => {\r\n  try {\r\n    await Client.post(\"/auth/signout\", {}, { withCredentials: true })\r\n    return true\r\n  } catch (error) {\r\n    console.error(\"Logout error:\", error?.response?.data || error.message)\r\n    return false\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAEO,MAAM,YAAY,OAAM;IAC7B,IAAI;QACF,MAAM,MAAM,MAAM,+GAAO,IAAI,CAAC,gBAAgB,MAAM;YAAE,iBAAiB;QAAK;QAC5E,OAAO,IAAI,IAAI,CAAC,IAAI,IAAI;IAC1B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gBAAgB,OAAO,UAAU,QAAQ,MAAM,OAAO;QACpE,OAAO;IACT;AACF;AAEO,MAAM,eAAe;IAC1B,IAAI;QACF,MAAM,MAAM,MAAM,+GAAO,GAAG,CAAC,iBAAiB;YAAE,iBAAiB;QAAK;QACtE,OAAO,IAAI,IAAI,IAAI;IACrB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB,OAAO,UAAU,QAAQ,MAAM,OAAO;QAC5E,OAAO;IACT;AACF;AAEO,MAAM,aAAa;IACxB,IAAI;QACF,MAAM,+GAAO,IAAI,CAAC,iBAAiB,CAAC,GAAG;YAAE,iBAAiB;QAAK;QAC/D,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iBAAiB,OAAO,UAAU,QAAQ,MAAM,OAAO;QACrE,OAAO;IACT;AACF"}},
    {"offset": {"line": 494, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 499, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/context/AuthContext.js"],"sourcesContent":["\"use client\"\r\nimport { createContext, useContext, useState, useEffect } from \"react\"\r\nimport { CheckSession, LogOutUser } from \"@/lib/auth\"\r\n\r\nconst AuthContext = createContext()\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  // 🔁 Automatically check session on load\r\n  useEffect(() => {\r\n    const fetchSession = async () => {\r\n      try {\r\n        const session = await CheckSession()\r\n        console.log(\"context :\", session)\r\n        if (session?.user) {\r\n          setUser(session.user)\r\n        } else {\r\n          setUser(null)\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Session check failed:\", err)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n    fetchSession()\r\n  }, [])\r\n\r\n  // 🚪 Logout handler\r\n  const logout = async () => {\r\n    try {\r\n      await LogOutUser() // backend clears cookie\r\n      setUser(null)\r\n    } catch (err) {\r\n      console.error(\"Logout failed:\", err)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, setUser, logout, loading }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext)\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;;;AAIA,MAAM,4BAAc;AAEb,SAAS,aAAa,EAAE,QAAQ,EAAE;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,qNAAS;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,qNAAS;IAEvC,yCAAyC;IACzC,sNAAU;QACR,MAAM,eAAe;YACnB,IAAI;gBACF,MAAM,UAAU,MAAM;gBACtB,QAAQ,GAAG,CAAC,aAAa;gBACzB,IAAI,SAAS,MAAM;oBACjB,QAAQ,QAAQ,IAAI;gBACtB,OAAO;oBACL,QAAQ;gBACV;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,yBAAyB;YACzC,SAAU;gBACR,WAAW;YACb;QACF;QACA;IACF,GAAG,EAAE;IAEL,oBAAoB;IACpB,MAAM,SAAS;QACb,IAAI;YACF,MAAM,qHAAa,wBAAwB;;YAC3C,QAAQ;QACV,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,kBAAkB;QAClC;IACF;IAEA,qBACE,4OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;YAAQ;QAAQ;kBAC3D;;;;;;AAGP;AAEO,SAAS;IACd,OAAO,uNAAW;AACpB"}},
    {"offset": {"line": 561, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 566, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/context/AuthContext.jsx"],"sourcesContent":["\"use client\"\r\nimport { createContext, useContext, useEffect, useState, useCallback } from \"react\"\r\nimport { CheckSession, LogOutUser } from \"@/lib/auth\"\r\n\r\nconst AuthContext = createContext({ user: null, setUser: () => {}, logout: async () => {} })\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null)\r\n\r\n  useEffect(() => {\r\n    const fetchSession = async () => {\r\n      const session = await CheckSession()\r\n      setUser(session?.user || null)\r\n    }\r\n    fetchSession()\r\n  }, [])\r\n\r\n  const logout = useCallback(async () => {\r\n    await LogOutUser()\r\n    setUser(null)\r\n    if (typeof window !== \"undefined\") window.location.reload()\r\n  }, [])\r\n\r\n  return <AuthContext.Provider value={{ user, setUser, logout }}>{children}</AuthContext.Provider>\r\n}\r\n\r\nexport const useAuth = () => useContext(AuthContext)\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;;;AAIA,MAAM,4BAAc,0NAAc;IAAE,MAAM;IAAM,SAAS,KAAO;IAAG,QAAQ,WAAa;AAAE;AAEnF,SAAS,aAAa,EAAE,QAAQ,EAAE;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,qNAAS;IAEjC,sNAAU;QACR,MAAM,eAAe;YACnB,MAAM,UAAU,MAAM;YACtB,QAAQ,SAAS,QAAQ;QAC3B;QACA;IACF,GAAG,EAAE;IAEL,MAAM,SAAS,wNAAY;QACzB,MAAM;QACN,QAAQ;QACR,IAAI,OAAO,WAAW,aAAa,OAAO,QAAQ,CAAC,MAAM;IAC3D,GAAG,EAAE;IAEL,qBAAO,4OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;QAAO;kBAAI;;;;;;AAClE;AAEO,MAAM,UAAU,IAAM,uNAAW"}},
    {"offset": {"line": 611, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 616, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/components/Nav.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport Link from \"next/link\"\r\nimport { useEffect, useState, useRef } from \"react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { useAuth } from \"@/context/AuthContext\"\r\nimport Client from \"@/lib/api\"\r\nimport EditCategories from \"@/components/EditCategories\"\r\nimport CategoryBar from \"@/components/CategoryBar\"\r\n\r\nexport default function Nav() {\r\n  const router = useRouter()\r\n  const { user, logout } = useAuth()\r\n  const [open, setOpen] = useState(false)\r\n  const [showCategories, setShowCategories] = useState(false)\r\n  const [products, setProducts] = useState([])\r\n  const [search, setSearch] = useState(\"\")\r\n  const [filtered, setFiltered] = useState([])\r\n  const [showDropdown, setShowDropdown] = useState(false)\r\n  const [activeIndex, setActiveIndex] = useState(-1)\r\n  const [refreshTrigger, setRefreshTrigger] = useState(0)\r\n\r\n  const searchRef = useRef(null)\r\n  const resultsRef = useRef(null)\r\n\r\n  // ✅ Fetch products\r\n  useEffect(() => {\r\n    let active = true\r\n    const fetchProducts = async () => {\r\n      try {\r\n        const res = await Client.get(\"/products\", { withCredentials: true })\r\n        if (active) setProducts(res.data.products || [])\r\n      } catch (err) {\r\n        console.error(\"❌ Products fetch error:\", err)\r\n      }\r\n    }\r\n    fetchProducts()\r\n    const t = setTimeout(fetchProducts, 1500)\r\n    return () => {\r\n      active = false\r\n      clearTimeout(t)\r\n    }\r\n  }, [refreshTrigger])\r\n\r\n  // ✅ Search logic\r\n  const handleSearch = e => {\r\n    const value = e.target.value\r\n    setSearch(value)\r\n    if (!value.trim()) {\r\n      setFiltered([])\r\n      setShowDropdown(false)\r\n      return\r\n    }\r\n    const q = value.toLowerCase()\r\n    const match = products.filter(\r\n      p =>\r\n        p.name.toLowerCase().includes(q) ||\r\n        p.model?.toLowerCase().includes(q) ||\r\n        p.barcode?.toLowerCase().includes(q)\r\n    )\r\n    setFiltered(match)\r\n    setShowDropdown(match.length > 0)\r\n    setActiveIndex(-1)\r\n  }\r\n\r\n  // ✅ Keyboard navigation\r\n  const handleKeyDown = e => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault()\r\n      if (showDropdown && activeIndex >= 0) {\r\n        router.push(`/products/${filtered[activeIndex].slug}`)\r\n        handleCloseMenus()\r\n        setSearch(\"\")\r\n        return\r\n      }\r\n      if (search.trim()) {\r\n        router.push(`/products?search=${encodeURIComponent(search.trim())}`)\r\n        handleCloseMenus()\r\n      }\r\n    }\r\n    if (!showDropdown || !filtered.length) return\r\n    if (e.key === \"ArrowDown\") setActiveIndex(i => (i < filtered.length - 1 ? i + 1 : 0))\r\n    else if (e.key === \"ArrowUp\") setActiveIndex(i => (i > 0 ? i - 1 : filtered.length - 1))\r\n  }\r\n\r\n  // ✅ Close dropdown on outside click\r\n  useEffect(() => {\r\n    const close = e => {\r\n      if (\r\n        searchRef.current &&\r\n        !searchRef.current.contains(e.target) &&\r\n        !resultsRef.current?.contains(e.target)\r\n      )\r\n        setShowDropdown(false)\r\n    }\r\n    document.addEventListener(\"mousedown\", close)\r\n    return () => document.removeEventListener(\"mousedown\", close)\r\n  }, [])\r\n\r\n  // ✅ Reload categories\r\n  const reloadCategories = () => setRefreshTrigger(x => x + 1)\r\n\r\n  // ✅ Close dropdown + mobile menu\r\n  const handleCloseMenus = () => {\r\n    setShowDropdown(false)\r\n    setOpen(false)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Fixed Navbar */}\r\n      <nav className=\"fixed top-0 left-0 w-full z-50 bg-black shadow-md\">\r\n        <div className=\"max-w-screen-xl mx-auto flex items-center justify-between p-4 gap-3\">\r\n          {/* Logo (Left) */}\r\n          <Link href=\"/\" onClick={handleCloseMenus} className=\"flex items-center space-x-3\">\r\n            <img\r\n              src=\"https://hebat-products.s3.me-south-1.amazonaws.com/Hebat_Logo_Text_page-0001.jpg\"\r\n              className=\"h-10 sm:h-12\"\r\n              alt=\"Hebat Logo\"\r\n            />\r\n          </Link>\r\n\r\n          {/* Search (Center) */}\r\n          <div\r\n            className=\"relative flex-1 max-w-md mx-2 w-full\"\r\n            ref={searchRef}\r\n            onKeyDown={handleKeyDown}\r\n          >\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search by name, model, or barcode...\"\r\n              value={search}\r\n              onChange={handleSearch}\r\n              onFocus={() => search && setShowDropdown(true)}\r\n              className=\"w-full bg-gray-100 border border-yellow-500 text-gray-900 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 p-2.5\"\r\n            />\r\n\r\n            {/* 🔥 Dropdown — same width as search bar */}\r\n            {showDropdown && (\r\n              <div\r\n                ref={resultsRef}\r\n                className=\"absolute top-full left-0 w-full bg-white border border-gray-200 rounded-b-md shadow-lg z-[60] max-h-72 overflow-y-auto\"\r\n              >\r\n                {filtered.length ? (\r\n                  filtered.map((p, i) => (\r\n                    <Link\r\n                      key={p._id}\r\n                      href={`/products/${p.slug}`}\r\n                      onClick={handleCloseMenus}\r\n                      className={`flex items-center gap-3 px-3 py-2 text-sm rounded-md ${\r\n                        i === activeIndex ? \"bg-yellow-100\" : \"hover:bg-yellow-100\"\r\n                      }`}\r\n                    >\r\n                      <img\r\n                        src={p.image?.s3Url || \"/hebat_product_fill.png\"}\r\n                        alt={p.name}\r\n                        className=\"w-10 h-10 object-cover rounded-md border border-gray-200\"\r\n                      />\r\n                      <div>\r\n                        <p className=\"font-medium text-gray-900\">{p.name}</p>\r\n                        <p className=\"text-xs text-gray-600 truncate\">\r\n                          {p.model || \"No model\"} — {p.barcode || \"No barcode\"}\r\n                        </p>\r\n                      </div>\r\n                    </Link>\r\n                  ))\r\n                ) : (\r\n                  <p className=\"text-gray-500 text-sm px-3 py-2\">No products found</p>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Hamburger (Right) */}\r\n          <button\r\n            onClick={() => setOpen(!open)}\r\n            className=\"md:hidden text-white p-2 focus:outline-none focus:ring-2 focus:ring-yellow-400 rounded-lg\"\r\n          >\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              fill=\"none\"\r\n              viewBox=\"0 0 24 24\"\r\n              strokeWidth=\"2\"\r\n              stroke=\"currentColor\"\r\n              className=\"w-6 h-6\"\r\n            >\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4 6h16M4 12h16M4 18h16\" />\r\n            </svg>\r\n          </button>\r\n\r\n          {/* Links */}\r\n          <div\r\n            className={`${\r\n              open ? \"block\" : \"hidden\"\r\n            } absolute md:static top-[72px] right-0 w-full md:w-auto bg-black md:bg-transparent border-t md:border-0 border-gray-700 md:flex md:items-center transition-all duration-300 z-[70]`}\r\n          >\r\n            <ul className=\"font-medium flex flex-col md:flex-row text-center md:text-left p-4 md:p-0 md:space-x-6\">\r\n              <li>\r\n                <Link\r\n                  href=\"/\"\r\n                  onClick={handleCloseMenus}\r\n                  className=\"block py-2 px-3 text-white hover:text-yellow-500\"\r\n                >\r\n                  Home\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link\r\n                  href=\"/products\"\r\n                  onClick={handleCloseMenus}\r\n                  className=\"block py-2 px-3 text-white hover:text-yellow-500\"\r\n                >\r\n                  Products\r\n                </Link>\r\n              </li>\r\n              {user && (\r\n                <>\r\n                  <li>\r\n                    <Link\r\n                      href=\"/newproduct\"\r\n                      onClick={handleCloseMenus}\r\n                      className=\"block py-2 px-3 text-white hover:text-yellow-500\"\r\n                    >\r\n                      New Product\r\n                    </Link>\r\n                  </li>\r\n                  <li>\r\n                    <button\r\n                      onClick={() => {\r\n                        handleCloseMenus()\r\n                        setShowCategories(true)\r\n                      }}\r\n                      className=\"block py-2 px-3 text-white hover:text-yellow-500 w-full text-left\"\r\n                    >\r\n                      Manage Categories\r\n                    </button>\r\n                  </li>\r\n                  <li>\r\n                    <button\r\n                      onClick={() => {\r\n                        logout()\r\n                        handleCloseMenus()\r\n                      }}\r\n                      className=\"block py-2 px-3 text-white hover:text-yellow-500 w-full text-left\"\r\n                    >\r\n                      Logout\r\n                    </button>\r\n                  </li>\r\n                </>\r\n              )}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Category Bar */}\r\n        <CategoryBar refreshTrigger={refreshTrigger} />\r\n      </nav>\r\n\r\n      {/* Admin Category Modal */}\r\n      {showCategories && (\r\n        <div className=\"fixed inset-0 z-[80] flex items-center justify-center bg-black bg-opacity-50\">\r\n          <div className=\"bg-white rounded-lg shadow-lg w-full max-w-lg mx-4 p-6 relative\">\r\n            <h2 className=\"text-xl font-bold mb-4 text-gray-800\">Manage Categories</h2>\r\n            <EditCategories onUpdated={reloadCategories} />\r\n            <button\r\n              onClick={() => setShowCategories(false)}\r\n              className=\"absolute top-3 right-3 text-gray-500 hover:text-black\"\r\n            >\r\n              ✕\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1028, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}