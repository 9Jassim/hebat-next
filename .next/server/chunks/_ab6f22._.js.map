{
  "version": 3,
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/lib/api.js"],"sourcesContent":["import axios from \"axios\"\r\n\r\nconst Client = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL || \"http://localhost:3000\",\r\n  withCredentials: true,\r\n})\r\n\r\nexport default Client\r\n"],"names":[],"mappings":";;;;;;AAEA,MAAM,SAAS,mIAAM,MAAM,CAAC;IAC1B,SAAS,QAAQ,GAAG,CAAC,mBAAmB,IAAI;IAC5C,iBAAiB;AACnB;uCAEe"}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/lib/auth.js"],"sourcesContent":["import Client from \"@/lib/api\"\r\n\r\nexport const LogInUser = async data => {\r\n  try {\r\n    const res = await Client.post(\"/auth/signin\", data, { withCredentials: true })\r\n    return res.data.user || null\r\n  } catch (error) {\r\n    console.error(\"Login error:\", error?.response?.data || error.message)\r\n    return null\r\n  }\r\n}\r\n\r\nexport const CheckSession = async () => {\r\n  try {\r\n    const res = await Client.get(\"/auth/session\", { withCredentials: true })\r\n    return res.data || null\r\n  } catch (error) {\r\n    console.error(\"Session check error:\", error?.response?.data || error.message)\r\n    return null\r\n  }\r\n}\r\n\r\nexport const LogOutUser = async () => {\r\n  try {\r\n    await Client.post(\"/auth/signout\", {}, { withCredentials: true })\r\n    return true\r\n  } catch (error) {\r\n    console.error(\"Logout error:\", error?.response?.data || error.message)\r\n    return false\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAEO,MAAM,YAAY,OAAM;IAC7B,IAAI;QACF,MAAM,MAAM,MAAM,+GAAO,IAAI,CAAC,gBAAgB,MAAM;YAAE,iBAAiB;QAAK;QAC5E,OAAO,IAAI,IAAI,CAAC,IAAI,IAAI;IAC1B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gBAAgB,OAAO,UAAU,QAAQ,MAAM,OAAO;QACpE,OAAO;IACT;AACF;AAEO,MAAM,eAAe;IAC1B,IAAI;QACF,MAAM,MAAM,MAAM,+GAAO,GAAG,CAAC,iBAAiB;YAAE,iBAAiB;QAAK;QACtE,OAAO,IAAI,IAAI,IAAI;IACrB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB,OAAO,UAAU,QAAQ,MAAM,OAAO;QAC5E,OAAO;IACT;AACF;AAEO,MAAM,aAAa;IACxB,IAAI;QACF,MAAM,+GAAO,IAAI,CAAC,iBAAiB,CAAC,GAAG;YAAE,iBAAiB;QAAK;QAC/D,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iBAAiB,OAAO,UAAU,QAAQ,MAAM,OAAO;QACrE,OAAO;IACT;AACF"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/context/AuthContext.js"],"sourcesContent":["\"use client\"\r\nimport { createContext, useContext, useState, useEffect } from \"react\"\r\nimport { CheckSession, LogOutUser } from \"@/lib/auth\"\r\n\r\nconst AuthContext = createContext()\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  // üîÅ Automatically check session on load\r\n  useEffect(() => {\r\n    const fetchSession = async () => {\r\n      try {\r\n        const session = await CheckSession()\r\n        console.log(\"context :\", session)\r\n        if (session?.user) {\r\n          setUser(session.user)\r\n        } else {\r\n          setUser(null)\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Session check failed:\", err)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n    fetchSession()\r\n  }, [])\r\n\r\n  // üö™ Logout handler\r\n  const logout = async () => {\r\n    try {\r\n      await LogOutUser() // backend clears cookie\r\n      setUser(null)\r\n    } catch (err) {\r\n      console.error(\"Logout failed:\", err)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, setUser, logout, loading }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext)\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;;;AAIA,MAAM,4BAAc;AAEb,SAAS,aAAa,EAAE,QAAQ,EAAE;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,qNAAS;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,qNAAS;IAEvC,yCAAyC;IACzC,sNAAU;QACR,MAAM,eAAe;YACnB,IAAI;gBACF,MAAM,UAAU,MAAM;gBACtB,QAAQ,GAAG,CAAC,aAAa;gBACzB,IAAI,SAAS,MAAM;oBACjB,QAAQ,QAAQ,IAAI;gBACtB,OAAO;oBACL,QAAQ;gBACV;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,yBAAyB;YACzC,SAAU;gBACR,WAAW;YACb;QACF;QACA;IACF,GAAG,EAAE;IAEL,oBAAoB;IACpB,MAAM,SAAS;QACb,IAAI;YACF,MAAM,qHAAa,wBAAwB;;YAC3C,QAAQ;QACV,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,kBAAkB;QAClC;IACF;IAEA,qBACE,4OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;YAAQ;QAAQ;kBAC3D;;;;;;AAGP;AAEO,SAAS;IACd,OAAO,uNAAW;AACpB"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/context/AuthContext.jsx"],"sourcesContent":["\"use client\"\r\nimport { createContext, useContext, useEffect, useState, useCallback } from \"react\"\r\nimport { CheckSession, LogOutUser } from \"@/lib/auth\"\r\n\r\nconst AuthContext = createContext({ user: null, setUser: () => {}, logout: async () => {} })\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null)\r\n\r\n  useEffect(() => {\r\n    const fetchSession = async () => {\r\n      const session = await CheckSession()\r\n      setUser(session?.user || null)\r\n    }\r\n    fetchSession()\r\n  }, [])\r\n\r\n  const logout = useCallback(async () => {\r\n    await LogOutUser()\r\n    setUser(null)\r\n    if (typeof window !== \"undefined\") window.location.reload()\r\n  }, [])\r\n\r\n  return <AuthContext.Provider value={{ user, setUser, logout }}>{children}</AuthContext.Provider>\r\n}\r\n\r\nexport const useAuth = () => useContext(AuthContext)\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;;;AAIA,MAAM,4BAAc,0NAAc;IAAE,MAAM;IAAM,SAAS,KAAO;IAAG,QAAQ,WAAa;AAAE;AAEnF,SAAS,aAAa,EAAE,QAAQ,EAAE;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,qNAAS;IAEjC,sNAAU;QACR,MAAM,eAAe;YACnB,MAAM,UAAU,MAAM;YACtB,QAAQ,SAAS,QAAQ;QAC3B;QACA;IACF,GAAG,EAAE;IAEL,MAAM,SAAS,wNAAY;QACzB,MAAM;QACN,QAAQ;QACR,IAAI,OAAO,WAAW,aAAa,OAAO,QAAQ,CAAC,MAAM;IAC3D,GAAG,EAAE;IAEL,qBAAO,4OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;QAAO;kBAAI;;;;;;AAClE;AAEO,MAAM,UAAU,IAAM,uNAAW"}},
    {"offset": {"line": 179, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/app/newsletter/page.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport Client from \"@/lib/api\"\r\nimport { useAuth } from \"@/context/AuthContext\"\r\nimport Button from \"@mui/material/Button\"\r\nimport Dialog from \"@mui/material/Dialog\"\r\nimport DialogTitle from \"@mui/material/DialogTitle\"\r\nimport DialogContent from \"@mui/material/DialogContent\"\r\nimport DialogActions from \"@mui/material/DialogActions\"\r\n\r\nexport default function NewsletterPage() {\r\n  const { user } = useAuth()\r\n  const [subscribers, setSubscribers] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [message, setMessage] = useState(\"\")\r\n  const [openConfirm, setOpenConfirm] = useState(false)\r\n  const [selectedSub, setSelectedSub] = useState(null)\r\n  const [sending, setSending] = useState(false)\r\n\r\n  // ‚úÖ Fetch subscribers\r\n  const fetchSubscribers = async () => {\r\n    try {\r\n      const res = await Client.get(\"/newsletter\", { withCredentials: true })\r\n      setSubscribers(res.data.subscribers || [])\r\n    } catch (err) {\r\n      console.error(\"‚ùå Error fetching subscribers:\", err)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchSubscribers()\r\n  }, [])\r\n\r\n  // ‚úÖ Send message to all subscribers\r\n  const handleSend = async e => {\r\n    e.preventDefault()\r\n    if (!message.trim()) return alert(\"Please enter a message before sending.\")\r\n\r\n    setSending(true)\r\n    try {\r\n      await Client.post(\"/newsletter/send\", { message }, { withCredentials: true })\r\n      alert(\"‚úÖ Message sent successfully to all subscribers!\")\r\n      setMessage(\"\")\r\n    } catch (err) {\r\n      console.error(\"‚ùå Failed to send newsletter:\", err)\r\n      alert(\"Failed to send message. Please try again.\")\r\n    } finally {\r\n      setSending(false)\r\n    }\r\n  }\r\n\r\n  // ‚úÖ Remove a subscriber\r\n  const handleRemove = async () => {\r\n    try {\r\n      await Client.delete(`/newsletter/${selectedSub._id}`, {\r\n        withCredentials: true,\r\n      })\r\n      setSubscribers(prev => prev.filter(s => s._id !== selectedSub._id))\r\n      setOpenConfirm(false)\r\n    } catch (err) {\r\n      console.error(\"‚ùå Failed to remove subscriber:\", err)\r\n      alert(\"Error removing subscriber.\")\r\n    }\r\n  }\r\n\r\n  // üö´ Only admins can view this page\r\n  if (!user)\r\n    return (\r\n      <div className=\"flex justify-center items-center min-h-[60vh] text-gray-600\">\r\n        You must be logged in as an admin to access this page.\r\n      </div>\r\n    )\r\n\r\n  return (\r\n    <div className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      {/* Header */}\r\n      <h1 className=\"text-2xl font-bold text-yellow-500 mb-6\">Newsletter Management</h1>\r\n\r\n      {/* Send message section */}\r\n      <div className=\"bg-white border border-gray-200 rounded-xl shadow-sm p-6 mb-8\">\r\n        <h2 className=\"text-lg font-semibold text-gray-800 mb-3\">\r\n          Send Message to All Subscribers\r\n        </h2>\r\n\r\n        <form onSubmit={handleSend} className=\"space-y-4\">\r\n          <textarea\r\n            rows=\"4\"\r\n            placeholder=\"Write your newsletter message...\"\r\n            value={message}\r\n            onChange={e => setMessage(e.target.value)}\r\n            className=\"w-full border border-gray-300 rounded-lg px-4 py-2 text-gray-800 focus:ring-yellow-500 focus:border-yellow-500\"\r\n          ></textarea>\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            disabled={sending}\r\n            className=\"!bg-yellow-500 hover:!bg-yellow-600 text-white font-semibold\"\r\n          >\r\n            {sending ? \"Sending...\" : \"Send to All Subscribers\"}\r\n          </Button>\r\n        </form>\r\n      </div>\r\n\r\n      {/* Subscribers list */}\r\n      <div className=\"bg-white border border-gray-200 rounded-xl shadow-sm p-6\">\r\n        <h2 className=\"text-lg font-semibold text-gray-800 mb-4\">\r\n          Subscribers ({subscribers.length})\r\n        </h2>\r\n\r\n        {loading ? (\r\n          <p className=\"text-gray-600 text-sm\">Loading subscribers...</p>\r\n        ) : subscribers.length === 0 ? (\r\n          <p className=\"text-gray-600 text-sm\">No subscribers yet.</p>\r\n        ) : (\r\n          <table className=\"w-full border-collapse text-sm text-left text-gray-700\">\r\n            <thead>\r\n              <tr className=\"border-b border-gray-200 text-gray-900 font-semibold\">\r\n                <th className=\"py-2 px-3\">#</th>\r\n                <th className=\"py-2 px-3\">Email</th>\r\n                <th className=\"py-2 px-3 text-right\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {subscribers.map((sub, idx) => (\r\n                <tr key={sub._id} className=\"border-b border-gray-100 hover:bg-gray-50\">\r\n                  <td className=\"py-2 px-3\">{idx + 1}</td>\r\n                  <td className=\"py-2 px-3\">{sub.email}</td>\r\n                  <td className=\"py-2 px-3 text-right\">\r\n                    <button\r\n                      onClick={() => {\r\n                        setSelectedSub(sub)\r\n                        setOpenConfirm(true)\r\n                      }}\r\n                      className=\"text-red-600 hover:text-red-700 font-medium text-sm\"\r\n                    >\r\n                      Remove\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n\r\n      {/* Confirm Remove Dialog */}\r\n      <Dialog open={openConfirm} onClose={() => setOpenConfirm(false)}>\r\n        <DialogTitle>Remove Subscriber?</DialogTitle>\r\n        <DialogContent>\r\n          <p className=\"text-gray-700\">\r\n            Are you sure you want to remove{\" \"}\r\n            <span className=\"font-semibold\">{selectedSub?.email}</span> from the newsletter list?\r\n          </p>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setOpenConfirm(false)}>Cancel</Button>\r\n          <Button onClick={handleRemove} color=\"error\">\r\n            Remove\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 541, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}